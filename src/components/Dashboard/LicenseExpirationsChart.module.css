/* ============================= */
/*  LicenseExpirationsChart.css  */
/* ============================= */

/* ---------- Card base (idéntica a Assistance, con fallbacks/compat) ---------- */
.card{ composes: card from global; }

/* --- Header + toolbar (alineado a la derecha) --- */
.cardHeader{
  display:flex; align-items:center; justify-content:space-between;
  gap:.75rem; padding:12px 16px 6px; z-index:1;
}
.cardTitle{
  margin:0; font-weight:600; font-size:1.02rem; letter-spacing:.1px;
  display:inline-flex; align-items:center; gap:.5rem;
  filter:drop-shadow(0 1px 1px rgba(0,0,0,.08));
}
.toolbar{
  margin-left:auto;                 /* empuja a la derecha */
  display:flex; align-items:center; gap:.45rem;
  flex-wrap:wrap;                   /* si no entra, pasa a segunda línea */
}
.rangeGroup{ display:inline-flex; gap:.45rem; }
.filterWrap{ position:relative; }

/* hover/focus ya lo tenés; esto solo uniforma alturas */
.rangeBtn, .filterBtn{ line-height:1; }

/* --- Responsive fino --- */
@media (max-width: 720px){
  .toolbar{ gap:.35rem; }
}
@media (max-width: 520px){
  /* en pantallas chicas, mostrás primero Filtros y luego 30/60/90d */
  .filterWrap{ order:1; }
  .rangeGroup{ order:2; }
  .toolbar{ justify-content:flex-end; }
}


/* ---------- Botones flotantes ---------- */
.rangeBtn{
  --bg1: color-mix(in srgb, var(--primary) 35%, transparent);
  --border: color-mix(in srgb, var(--border-color) 70%, transparent);
  position:relative; border:1px solid var(--border, var(--border-color));
  background:radial-gradient(100% 100% at 50% 0%, var(--bg1), transparent 70%), var(--glass-surface);
  color:inherit; padding:.42rem .68rem; border-radius:80px; cursor:pointer;
  display:inline-flex; align-items:center; gap:.42rem;
  box-shadow:0 4px 14px color-mix(in srgb, var(--shadow-color) 60%, transparent);
  transition:transform .12s ease, box-shadow .2s ease, background .2s ease, border-color .2s ease;
  -webkit-backdrop-filter:blur(6px) saturate(150%); backdrop-filter:blur(6px) saturate(150%);
}
.rangeBtn::before{
  content:""; position:absolute; inset:0; border-radius:inherit; padding:1px;
  background:linear-gradient(135deg,var(--primary),var(--primary-dark));
  -webkit-mask:linear-gradient(#000 0 0) content-box,linear-gradient(#000 0 0);
  -webkit-mask-composite:xor; mask-composite:exclude; opacity:.35; pointer-events:none;
}
.rangeBtn:hover{transform:translateY(-1px); box-shadow:0 8px 22px color-mix(in srgb,var(--shadow-color) 85%, transparent); border-color:color-mix(in srgb, var(--primary) 55%, var(--border-color));}
.rangeBtn.active{color:#fff; border-color:transparent; background:linear-gradient(135deg,var(--primary),var(--primary-dark)); box-shadow:0 10px 26px color-mix(in srgb,var(--primary) 35%, transparent), var(--shadow-1);}
.rangeBtn:focus-visible,.filterBtn:focus-visible{box-shadow:0 0 0 var(--ring) var(--ring-color), 0 10px 26px color-mix(in srgb,var(--primary) 25%, transparent); outline:none;}

/* ---------- Filtros ---------- */
.filterWrap{position:relative;}
.filterBtn{
  border:1px solid var(--chip-border); background:var(--chip-bg); color:inherit;
  padding:.48rem .75rem; border-radius:12px; cursor:pointer; display:inline-flex; align-items:center; gap:.5rem;
  -webkit-backdrop-filter:blur(8px) saturate(150%); backdrop-filter:blur(8px) saturate(150%);
  box-shadow:0 6px 18px color-mix(in srgb,var(--shadow-color) 70%, transparent);
  transition:transform .12s ease, box-shadow .2s ease, background .2s ease, border-color .2s ease;
}
.filterBtn:hover{transform:translateY(-1px); background:color-mix(in srgb, var(--chip-bg) 85%, rgba(255,255,255,.04)); border-color:color-mix(in srgb, var(--border-color) 60%, var(--primary) 20%);}
.filterPanel{
  position:absolute; right:0; top:calc(100% + .5rem); z-index:10; min-width:360px; max-width:480px;
  border-radius:14px; background:var(--glass-bg); border:1px solid var(--chip-border);
  box-shadow:var(--shadow-2); padding:.7rem; animation:slideIn .18s ease-out;
  -webkit-backdrop-filter:blur(10px) saturate(140%); backdrop-filter:blur(10px) saturate(140%);
}
.filterPanel::before{
  content:""; position:absolute; inset:0; border-radius:inherit; padding:1px;
  background:linear-gradient(135deg,var(--primary),var(--primary-dark));
  -webkit-mask:linear-gradient(#000 0 0) content-box,linear-gradient(#000 0 0);
  -webkit-mask-composite:xor; mask-composite:exclude; pointer-events:none; opacity:.35;
}
@keyframes slideIn{from{opacity:0; transform:translateY(-6px)} to{opacity:1; transform:translateY(0)}}
.filterHeader{display:flex; align-items:center; justify-content:space-between; gap:.5rem; margin-bottom:.45rem;}
.filterShortcuts{display:inline-flex; gap:.35rem; flex-wrap:wrap;}
.searchWrap{position:relative; margin-bottom:.45rem;}
.searchIcon{position:absolute; left:.6rem; top:50%; transform:translateY(-50%); opacity:.7;}
.search{
  width:100%; padding:.5rem .7rem .5rem 2rem; border-radius:10px; border:1px solid var(--chip-border);
  background:var(--glass-surface); color:inherit; transition:border-color .15s ease, box-shadow .15s ease;
}
.search:focus{outline:none; border-color:color-mix(in srgb, var(--primary) 45%, var(--chip-border)); box-shadow:0 0 0 var(--ring) var(--ring-color);}
.searchClear{position:absolute; right:.35rem; top:50%; transform:translateY(-50%); border:none; background:transparent; color:inherit; opacity:.75; cursor:pointer;}
.legend{display:flex; flex-wrap:wrap; gap:.4rem;}
.badge{padding:.22rem .5rem; border-radius:999px; color:#fff; font-size:.75rem; box-shadow:0 4px 12px var(--shadow-color);}

/* ---------- Chart / Skeleton ---------- */
.chartWrap{grid-row:2; width:100%; height:320px; margin:0;}
.skeleton{
  --card-h:350px; --plot-h:320px; --pad-x:16px; --pad-y:12px; --header-h:44px;
  --axis:rgba(255,255,255,.18); --grid:rgba(255,255,255,.10);
  --block:color-mix(in srgb, var(--text-color) 8%, transparent); --chip:color-mix(in srgb, var(--text-color) 6%, transparent);
  position:relative; grid-row:2; width:100%; height:var(--card-h); border-radius:18px; margin:0;
  background:color-mix(in srgb, var(--card-background) 88%, transparent);
  box-shadow:0 6px 20px var(--shadow-color), inset 0 1px 0 rgba(255,255,255,.06);
  -webkit-backdrop-filter:blur(10px) saturate(140%); backdrop-filter:blur(10px) saturate(140%);
  background-image:
    repeating-linear-gradient(to bottom, var(--grid) 0 1px, transparent 1px 36px),
    linear-gradient(to bottom, var(--axis), var(--axis)),
    linear-gradient(to right,  var(--axis), var(--axis)),
    linear-gradient(var(--block), var(--block)),
    linear-gradient(var(--chip), var(--chip)),
    linear-gradient(var(--chip), var(--chip)),
    linear-gradient(var(--chip), var(--chip));
  background-size:
    calc(100% - (var(--pad-x)*2)) var(--plot-h),
    1px var(--plot-h),
    calc(100% - (var(--pad-x)*2)) 1px,
    180px 14px, 68px 28px, 68px 28px, 88px 28px;
  background-position:
    right var(--pad-x) calc(var(--pad-y) + var(--header-h)),
    calc(var(--pad-x)) calc(var(--pad-y) + var(--header-h)),
    right var(--pad-x) calc(var(--pad-y) + var(--header-h) + var(--plot-h)),
    calc(var(--pad-x) + 8px) calc(var(--pad-y) + 6px),
    right calc(var(--pad-x) + 8px) calc(var(--pad-y) + 4px),
    right calc(var(--pad-x) + 88px) calc(var(--pad-y) + 4px),
    right calc(var(--pad-x) + 168px) calc(var(--pad-y) + 4px);
  background-repeat:no-repeat; overflow:hidden;
}
.skeleton::before{content:""; position:absolute; inset:0; border-radius:inherit; padding:1px; background:linear-gradient(135deg,var(--primary),var(--primary-dark));
  -webkit-mask:linear-gradient(#000 0 0) content-box,linear-gradient(#000 0 0); -webkit-mask-composite:xor; mask-composite:exclude; pointer-events:none; opacity:.45;}
.skeleton::after{content:""; position:absolute; inset:-25%; background:linear-gradient(120deg, transparent 46%, rgba(255,255,255,.10) 50%, transparent 54%);
  transform:translateX(-120%); animation:shimmer 1.4s linear infinite; mix-blend-mode:screen; pointer-events:none;}
@keyframes shimmer{0%{transform:translateX(-120%)}100%{transform:translateX(120%)}}
.error{color:var(--error); padding:.6rem .8rem; border-radius:10px; background:color-mix(in srgb, var(--error) 10%, transparent);}
.empty{display:flex; align-items:center; justify-content:center; height:var(--plot-h); margin:0;}
.emptyInner{text-align:center; opacity:.85; display:flex; flex-direction:column; gap:.25rem; align-items:center;}
.emptyInner svg{width:20px; height:20px;}
@media (prefers-reduced-motion:reduce){.skeleton::after{animation:none; opacity:0}}

/* --- Intro escalonada (30/60/90d + Filtros) --- */
@media (prefers-reduced-motion: no-preference){
  .rangeGroup > .rangeBtn,
  .toolbar > .filterWrap .filterBtn{
    opacity: 0;
    animation: chartToolbarIn .42s cubic-bezier(.2,.8,.2,1) both;
    will-change: transform, opacity;
  }

  /* delays: 30d → 60d → 90d → Filtros */
  .rangeGroup > .rangeBtn:nth-child(1){ animation-delay: .10s; }
  .rangeGroup > .rangeBtn:nth-child(2){ animation-delay: .20s; }
  .rangeGroup > .rangeBtn:nth-child(3){ animation-delay: .30s; }
  .toolbar > .filterWrap .filterBtn{  animation-delay: .40s; }
}

@keyframes chartToolbarIn{
  from{ opacity:0; transform: translateY(-6px) scale(.98); }
  to{   opacity:1; transform: translateY(0)    scale(1); }
}


/* ...tu CSS existente... */

.caption{
  margin: 0 16px 8px;
  font-size: .85rem;
  color: var(--secondary-text-color);
  opacity:.9;
}

